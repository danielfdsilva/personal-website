language: node_js

node_js:
  - '6'

env:
  global:
  - PRODUCTION_BRANCH=master

cache:
  apt: true
  yarn: true
  directories:
  - node_modules

before_install:
  - chmod +x ./.build_scripts/deploy.sh
  - sudo apt-get update
  - sudo apt-get install ncftp

script:
  - yarn build

deploy:
- provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${PRODUCTION_BRANCH}"